{"remainingRequest":"F:\\CUHKSZ\\CSC4001\\Project\\SE-CloudLGU\\src\\Front-End\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\CUHKSZ\\CSC4001\\Project\\SE-CloudLGU\\src\\Front-End\\src\\views\\personalCenter\\basicInfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"F:\\CUHKSZ\\CSC4001\\Project\\SE-CloudLGU\\src\\Front-End\\src\\views\\personalCenter\\basicInfo.vue","mtime":1650297032245},{"path":"F:\\CUHKSZ\\CSC4001\\Project\\SE-CloudLGU\\src\\Front-End\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650207855744},{"path":"F:\\CUHKSZ\\CSC4001\\Project\\SE-CloudLGU\\src\\Front-End\\node_modules\\babel-loader\\lib\\index.js","mtime":1650207856467},{"path":"F:\\CUHKSZ\\CSC4001\\Project\\SE-CloudLGU\\src\\Front-End\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650207855744},{"path":"F:\\CUHKSZ\\CSC4001\\Project\\SE-CloudLGU\\src\\Front-End\\node_modules\\vue-loader\\lib\\index.js","mtime":1650207856617}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyB1cGRhdGVQcm9maWxlLCB1cGRhdGVBdmF0YXIgfSBmcm9tICdAL2FwaS9wZXJzb25hbENlbnRlcicNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ0Jhc2ljSW5mb3JtYXRpb24nLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICB2YWx1ZVVybDogJycsDQogICAgICBuYW1lOiAnJywNCiAgICAgIGVtYWlsOiAnJywNCiAgICAgIGludHJvOiAnJywNCiAgICAgIGlkZW50aXR5OiAnJywNCiAgICAgIGVkaXRkaWFsb2dWaXNpYmxlOiBmYWxzZSwNCiAgICAgIGVkaXRfdXNlcjogew0KICAgICAgICB1c2VybmFtZTogJycsDQogICAgICAgIGludHJvOiAnJw0KICAgICAgfSwNCiAgICAgIGVkaXRfcnVsZXM6IHsNCiAgICAgICAgdXNlcm5hbWU6IFt7DQogICAgICAgICAgbWluOiA1LA0KICAgICAgICAgIG1heDogMTIsDQogICAgICAgICAgbWVzc2FnZTogJ1JhbmdlIHdpdGhpbiA1IHRvIDEyIGNoYXJhY3RlcnMnLA0KICAgICAgICAgIHRyaWdnZXI6ICdibHVyJw0KICAgICAgICB9XSwNCiAgICAgICAgaW50cm86IFt7DQogICAgICAgICAgbWluOiAwLA0KICAgICAgICAgIG1heDogNDAsDQogICAgICAgICAgbWVzc2FnZTogJ21heGltdW0gNDAgY2hhcmFjdGVycycsDQogICAgICAgICAgdHJpZ2dlcjogJ2JsdXInDQogICAgICAgIH1dDQogICAgICB9DQogICAgfQ0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMudmFsdWVVcmwgPSB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLmF2YXRhcg0KICAgIHRoaXMubmFtZSA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIubmFtZS5yZXBsYWNlKC9ccyovZywgJycpDQogICAgdGhpcy5lbWFpbCA9IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIuZW1haWwNCiAgICB0aGlzLmludHJvID0gdGhpcy4kc3RvcmUuc3RhdGUudXNlci5pbnRybw0KICAgIHRoaXMuaWRlbnRpdHkgPSB0aGlzLiRzdG9yZS5zdGF0ZS51c2VyLnJvbGVzWzBdDQogICAgY29uc29sZS5sb2codGhpcy52YWx1ZVVybCkNCiAgfSwNCiAgbWV0aG9kczogew0KDQogICAgdG9nZ2xlTW9kaWZ5KCkgew0KICAgICAgdGhpcy5lZGl0X3VzZXIudXNlcm5hbWUgPSB0aGlzLm5hbWUNCiAgICAgIHRoaXMuZWRpdF91c2VyLmludHJvID0gdGhpcy5pbnRybw0KICAgICAgdGhpcy5lZGl0ZGlhbG9nVmlzaWJsZSA9IHRydWUNCiAgICB9LA0KICAgIGhhbmRsZVVwZGF0ZSgpIHsNCiAgICAgIC8vIHNlbmQgYXZhdGFyIGFuZCBuYW1lLCBpbnRybyBzZXBlcmF0ZWx5DQogICAgICB1cGRhdGVQcm9maWxlKHRoaXMuJHN0b3JlLnN0YXRlLnVzZXIudG9rZW4sIHRoaXMuZWRpdF91c2VyKS50aGVuKHJlcyA9PiB7DQogICAgICAgIGNvbnNvbGUubG9nKCctLS1iYXNpYyBpbmZvOiBzZW5kIHVwZGF0ZWQgcHJvZmlsZSBzdWNjZXNzZnVsbHknKQ0KICAgICAgICBpZiAocmVzLmRhdGFbJ3N1Y2Nlc3MnXSkgew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgbWVzc2FnZTogJ1VwZGF0ZSBQcm9maWxlIFN1Y2Nlc3NmdWxseScsDQogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycNCiAgICAgICAgICB9KQ0KICAgICAgICAgIHRoaXMuZWRpdGRpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygwKQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgbWVzc2FnZTogJ1VwZGF0ZSBQcm9maWxlIEZhaWxlZCEgUGxlYXNlIHRyeSBhZ2FpbicsDQogICAgICAgICAgICB0eXBlOiAnZXJyb3InDQogICAgICAgICAgfSkNCiAgICAgICAgICB0aGlzLmVkaXRfdXNlci5uYW1lID0gdGhpcy5uYW1lDQogICAgICAgICAgdGhpcy5lZGl0X3VzZXIuaW50cm8gPSB0aGlzLmludHJvDQogICAgICAgICAgdGhpcy5lZGl0ZGlhbG9nVmlzaWJsZSA9IGZhbHNlDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICB1cGxvYWRGaWxlKGVsKSB7DQogICAgICBpZiAoIWVsLnRhcmdldC5maWxlc1swXS5zaXplKSByZXR1cm4gLy8gaWYgZmlsZSBzaXplID0gMCwgcmV0dXJuDQogICAgICBpZiAoZWwudGFyZ2V0LmZpbGVzWzBdLnR5cGUuaW5kZXhPZignaW1hZ2UnKSA9PT0gLTEpIHsgLy8gbWFrZSBzdXJlIGFuIGltYWdlIGlzIHNlbGVjdGVkDQogICAgICAgIHJldHVybg0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgY29uc3QgdGhhdCA9IHRoaXMNCiAgICAgICAgY29uc3QgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKSAvLyByZWFkIGZpbGUNCiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZWwudGFyZ2V0LmZpbGVzWzBdKSAvLyByZWFkIGZpbGUNCiAgICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKCkgew0KICAgICAgICAgIC8vIGFmdGVyIHJlYWRpbmcsIGdldCB0aGUgdXJsDQogICAgICAgICAgdGhhdC52YWx1ZVVybCA9IHRoaXMucmVzdWx0DQogICAgICAgICAgLy8gY29uc29sZS5sb2codGhhdC52YWx1ZVVybCk7DQogICAgICAgIH0NCiAgICAgICAgLy8gY29uc3QgdWlkID0gJ2UwYzlkZDNkZTA0MThlNjk4ZDQ5OTg0YWUwMzU5OTJhJzsgLy91aWQgbmVlZGVkIGZvciBiYWNrLWVuZA0KICAgICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKSAvLyBmb3JtZGF0YQ0KICAgICAgICAvLyBmb3JtRGF0YS5hcHBlbmQoJ3JlcycsIGVsLnRhcmdldC5maWxlc1swXSk7DQogICAgICAgIGZvcm1EYXRhLmFwcGVuZCgndXNlcklEJywgdGhpcy4kc3RvcmUuc3RhdGUudXNlci50b2tlbikNCiAgICAgICAgZm9ybURhdGEuYXBwZW5kKCdwaG90bycsIGVsLnRhcmdldC5maWxlc1swXSkNCiAgICAgICAgLy8gcG9zdCB0aGUgaW1hZ2UgdG8gYmFjay1lbmQNCiAgICAgICAgdXBkYXRlQXZhdGFyKGZvcm1EYXRhKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgaWYgKHJlcy5kYXRhWydzdWNjZXNzJ10pIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICBtZXNzYWdlOiAnVXBkYXRlIFByb2ZpbGUgU3VjY2Vzc2Z1bGx5JywNCiAgICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnDQogICAgICAgICAgICB9KQ0KICAgICAgICAgICAgdGhpcy4kcm91dGVyLmdvKDApDQogICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgICBtZXNzYWdlOiAnVXBkYXRlIFByb2ZpbGUgRmFpbGVkISBQbGVhc2UgdHJ5IGFnYWluJywNCiAgICAgICAgICAgICAgdHlwZTogJ2Vycm9yJw0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5nbygwKQ0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0NCiAgICB9LA0KICAgIGNhbmNlbEVkaXQoKSB7DQogICAgICB0aGlzLmVkaXRfdXNlci51c2VybmFtZSA9IHRoaXMubmFtZQ0KICAgICAgdGhpcy5lZGl0X3VzZXIuaW50cm8gPSB0aGlzLmludHJvDQogICAgICB0aGlzLmVkaXRkaWFsb2dWaXNpYmxlID0gZmFsc2UNCiAgICB9LA0KICAgIGdvQ2hhbmdlUGFzc3dvcmQoKSB7DQogICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3BlcnNvbmFsQ2VudGVyL2NoYW5nZVBhc3N3b3JkJykNCiAgICB9DQogIH0NCn0NCg=="},{"version":3,"sources":["basicInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"basicInfo.vue","sourceRoot":"src/views/personalCenter","sourcesContent":["<template>\r\n  <div class=\"personalCenter\">\r\n    <el-container>\r\n      <el-header> Basic Information </el-header>\r\n      <el-container style=\"height:650px\">\r\n        <el-aside width=\"400px\">\r\n          <el-col :span=\"12\">\r\n            <div class=\"sub-title\" />\r\n            <div class=\"demo-basic--circle\">\r\n              <div class=\"img\">\r\n                <el-avatar\r\n                  id=\"imgage\"\r\n                  :size=\"100\"\r\n                  :src=\"valueUrl\"\r\n                  align=\"center\"\r\n                />\r\n              </div>\r\n              <div class=\"block\">\r\n                <span> {{ name }} </span>\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n\r\n          <el-button-group style=\"float: right; padding: 3px 0\" type=\"text\">\r\n            <v-btn color=\"#50A75E\" class=\"submit white--text\" height=\"30\" style=\"margin-left:20px;\" @click=\"$refs.inputFile.click()\">Upload Avatar</v-btn>\r\n            <input v-show=\"false\" ref=\"inputFile\" type=\"file\" accept=\"image/*\" @change=\"uploadFile($event)\">\r\n          </el-button-group>\r\n        </el-aside>\r\n        <el-container>\r\n          <el-main>\r\n            <el-card class=\"box-card\">\r\n              <div>\r\n                <span style=\"float: left\" shadow=\"hover\"><b>Name</b></span>\r\n                <br>\r\n                <span> {{ name }} </span>\r\n                <el-divider />\r\n                <span style=\"float: left\" shadow=\"hover\"><b>Email</b></span>\r\n                <br>\r\n                <span> {{ email }} </span>\r\n                <el-divider />\r\n                <span style=\"float: left\" shadow=\"hover\"><b>Self Introduction</b></span>\r\n                <br>\r\n                <span> {{ intro }} </span>\r\n                <el-divider />\r\n                <span style=\"float: left\" shadow=\"hover\"><b>Identity</b></span>\r\n                <br>\r\n                <span> {{ identity }} </span>\r\n                <el-divider />\r\n              </div>\r\n              <v-btn color=\"#64d978\" class=\"submit white--text\" height=\"30\" @click=\"toggleModify\">Modify</v-btn>\r\n              <v-btn color=\"#64d9d6\" class=\"submit white--text\" height=\"30\" style=\"margin-left:20px;\" @click=\"goChangePassword\">Change Password</v-btn>\r\n            </el-card>\r\n          </el-main>\r\n        </el-container>\r\n      </el-container>\r\n    </el-container>\r\n    <div class=\"edit_dialog\">\r\n      <el-dialog\r\n        title=\"Edit User Information\"\r\n        :visible.sync=\"editdialogVisible\"\r\n        width=\"50%\"\r\n        style=\"font-family: Lucida Sans; color:#000000\"\r\n        append-to-body\n      >\r\n        <el-form ref=\"edit_user\" label-width=\"100px\" :model=\"edit_user\" :rules=\"edit_rules\">\r\n          <el-form-item label=\"Username\" prop=\"username\">\r\n            <el-input v-model=\"edit_user.username\" placeholder=\"\" />\r\n          </el-form-item>\r\n\r\n          <el-form-item label=\"Intro\" prop=\"intro\">\r\n            <el-input v-model=\"edit_user.intro\" placeholder=\"\" />\r\n          </el-form-item>\r\n          <el-form-item el-form-item>\r\n            <v-btn color=\"#FBE87985\" class=\"cancel#AAAAAA--text\" height=\"30\" @click=\"cancelEdit\">Cancel</v-btn>\r\n            <v-btn color=\"#50A75E\" class=\"submit white--text\" height=\"30\" style=\"margin-left:20px;\" @click=\"handleUpdate\">Submit</v-btn>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { updateProfile, updateAvatar } from '@/api/personalCenter'\r\nexport default {\r\n  name: 'BasicInformation',\r\n  data() {\r\n    return {\r\n      valueUrl: '',\r\n      name: '',\r\n      email: '',\r\n      intro: '',\r\n      identity: '',\r\n      editdialogVisible: false,\r\n      edit_user: {\r\n        username: '',\r\n        intro: ''\r\n      },\r\n      edit_rules: {\r\n        username: [{\r\n          min: 5,\r\n          max: 12,\r\n          message: 'Range within 5 to 12 characters',\r\n          trigger: 'blur'\r\n        }],\r\n        intro: [{\r\n          min: 0,\r\n          max: 40,\r\n          message: 'maximum 40 characters',\r\n          trigger: 'blur'\r\n        }]\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.valueUrl = this.$store.state.user.avatar\r\n    this.name = this.$store.state.user.name.replace(/\\s*/g, '')\r\n    this.email = this.$store.state.user.email\r\n    this.intro = this.$store.state.user.intro\r\n    this.identity = this.$store.state.user.roles[0]\r\n    console.log(this.valueUrl)\r\n  },\r\n  methods: {\r\n\r\n    toggleModify() {\r\n      this.edit_user.username = this.name\r\n      this.edit_user.intro = this.intro\r\n      this.editdialogVisible = true\r\n    },\r\n    handleUpdate() {\r\n      // send avatar and name, intro seperately\r\n      updateProfile(this.$store.state.user.token, this.edit_user).then(res => {\r\n        console.log('---basic info: send updated profile successfully')\r\n        if (res.data['success']) {\r\n          this.$message({\r\n            message: 'Update Profile Successfully',\r\n            type: 'success'\r\n          })\r\n          this.editdialogVisible = false\r\n          this.$router.go(0)\r\n        } else {\r\n          this.$message({\r\n            message: 'Update Profile Failed! Please try again',\r\n            type: 'error'\r\n          })\r\n          this.edit_user.name = this.name\r\n          this.edit_user.intro = this.intro\r\n          this.editdialogVisible = false\r\n        }\r\n      })\r\n    },\r\n    uploadFile(el) {\r\n      if (!el.target.files[0].size) return // if file size = 0, return\r\n      if (el.target.files[0].type.indexOf('image') === -1) { // make sure an image is selected\r\n        return\r\n      } else {\r\n        const that = this\r\n        const reader = new FileReader() // read file\r\n        reader.readAsDataURL(el.target.files[0]) // read file\r\n        reader.onload = function() {\r\n          // after reading, get the url\r\n          that.valueUrl = this.result\r\n          // console.log(that.valueUrl);\r\n        }\r\n        // const uid = 'e0c9dd3de0418e698d49984ae035992a'; //uid needed for back-end\r\n        var formData = new FormData() // formdata\r\n        // formData.append('res', el.target.files[0]);\r\n        formData.append('userID', this.$store.state.user.token)\r\n        formData.append('photo', el.target.files[0])\r\n        // post the image to back-end\r\n        updateAvatar(formData).then(res => {\r\n          if (res.data['success']) {\r\n            this.$message({\r\n              message: 'Update Profile Successfully',\r\n              type: 'success'\r\n            })\r\n            this.$router.go(0)\r\n          } else {\r\n            this.$message({\r\n              message: 'Update Profile Failed! Please try again',\r\n              type: 'error'\r\n            })\r\n            this.$router.go(0)\r\n          }\r\n        })\r\n      }\r\n    },\r\n    cancelEdit() {\r\n      this.edit_user.username = this.name\r\n      this.edit_user.intro = this.intro\r\n      this.editdialogVisible = false\r\n    },\r\n    goChangePassword() {\r\n      this.$router.push('/personalCenter/changePassword')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.dashboard {\r\n  &-container {\r\n    margin: 30px;\r\n  }\r\n  &-text {\r\n    font-size: 30px;\r\n    line-height: 46px;\r\n  }\r\n}\r\n\r\n.disInputStyle{\r\n  text-align: center;\r\n}\r\n\r\n.personalCenter {\r\n  min-height: 100%;\r\n  height: 100%;\r\n  background-color: #e9eef3;\r\n}\r\n\r\n.user-avatar {\r\n  cursor: pointer;\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 10px;\r\n}\r\n\r\n.el-header {\r\n    line-height: 60px;\r\n    text-align: center;\r\n    background-color: #b3c0d1;\r\n  }\r\n  .el-aside {\r\n    line-height: 44px;\r\n    text-align: center;\r\n    background-color: #d3dce6;\r\n  }\r\n  .el-main {\r\n    min-height: 100%;\r\n    line-height: 36px;\r\n    text-align: center;\r\n    background-color: #e9eef3;\r\n  }\r\n\r\n  .demo-basic--circle {\r\n    margin-top: 30px;\r\n    margin-left: 150px;\r\n  }\r\n  .block {\r\n    margin-left: 25px;\r\n    font-weight: bold;\r\n  }\r\n  .text {\r\n    font-size: 14px;\r\n  }\r\n  .item {\r\n    margin-bottom: 18px;\r\n  }\r\n  .clearfix:before,\r\n  .clearfix:after {\r\n    display: table;\r\n    content: '';\r\n  }\r\n  .clearfix:after {\r\n    clear: both;\r\n  }\r\n\r\n  .box-card {\r\n    margin-left: 10%;\r\n    min-height: 100%;\r\n\r\n    width: 80%;\r\n    border-radius: 30px;\r\n  }\r\n</style>\n"]}]}