{"remainingRequest":"F:\\CUHKSZ\\CSC4001\\Project\\SE-CloudLGU\\src\\Front-End\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!F:\\CUHKSZ\\CSC4001\\Project\\SE-CloudLGU\\src\\Front-End\\src\\views\\personalCenter\\basicInfo.vue?vue&type=style&index=0&id=7b82543c&lang=scss&scoped=true&","dependencies":[{"path":"F:\\CUHKSZ\\CSC4001\\Project\\SE-CloudLGU\\src\\Front-End\\src\\views\\personalCenter\\basicInfo.vue","mtime":1650297032245},{"path":"F:\\CUHKSZ\\CSC4001\\Project\\SE-CloudLGU\\src\\Front-End\\node_modules\\css-loader\\dist\\cjs.js","mtime":1650207856081},{"path":"F:\\CUHKSZ\\CSC4001\\Project\\SE-CloudLGU\\src\\Front-End\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1650207856955},{"path":"F:\\CUHKSZ\\CSC4001\\Project\\SE-CloudLGU\\src\\Front-End\\node_modules\\postcss-loader\\src\\index.js","mtime":1650207856463},{"path":"F:\\CUHKSZ\\CSC4001\\Project\\SE-CloudLGU\\src\\Front-End\\node_modules\\sass-loader\\dist\\cjs.js","mtime":1650207855745},{"path":"F:\\CUHKSZ\\CSC4001\\Project\\SE-CloudLGU\\src\\Front-End\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1650207855744},{"path":"F:\\CUHKSZ\\CSC4001\\Project\\SE-CloudLGU\\src\\Front-End\\node_modules\\vue-loader\\lib\\index.js","mtime":1650207856617}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmRhc2hib2FyZCB7DQogICYtY29udGFpbmVyIHsNCiAgICBtYXJnaW46IDMwcHg7DQogIH0NCiAgJi10ZXh0IHsNCiAgICBmb250LXNpemU6IDMwcHg7DQogICAgbGluZS1oZWlnaHQ6IDQ2cHg7DQogIH0NCn0NCg0KLmRpc0lucHV0U3R5bGV7DQogIHRleHQtYWxpZ246IGNlbnRlcjsNCn0NCg0KLnBlcnNvbmFsQ2VudGVyIHsNCiAgbWluLWhlaWdodDogMTAwJTsNCiAgaGVpZ2h0OiAxMDAlOw0KICBiYWNrZ3JvdW5kLWNvbG9yOiAjZTllZWYzOw0KfQ0KDQoudXNlci1hdmF0YXIgew0KICBjdXJzb3I6IHBvaW50ZXI7DQogIHdpZHRoOiA0MHB4Ow0KICBoZWlnaHQ6IDQwcHg7DQogIGJvcmRlci1yYWRpdXM6IDEwcHg7DQp9DQoNCi5lbC1oZWFkZXIgew0KICAgIGxpbmUtaGVpZ2h0OiA2MHB4Ow0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjYjNjMGQxOw0KICB9DQogIC5lbC1hc2lkZSB7DQogICAgbGluZS1oZWlnaHQ6IDQ0cHg7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIGJhY2tncm91bmQtY29sb3I6ICNkM2RjZTY7DQogIH0NCiAgLmVsLW1haW4gew0KICAgIG1pbi1oZWlnaHQ6IDEwMCU7DQogICAgbGluZS1oZWlnaHQ6IDM2cHg7DQogICAgdGV4dC1hbGlnbjogY2VudGVyOw0KICAgIGJhY2tncm91bmQtY29sb3I6ICNlOWVlZjM7DQogIH0NCg0KICAuZGVtby1iYXNpYy0tY2lyY2xlIHsNCiAgICBtYXJnaW4tdG9wOiAzMHB4Ow0KICAgIG1hcmdpbi1sZWZ0OiAxNTBweDsNCiAgfQ0KICAuYmxvY2sgew0KICAgIG1hcmdpbi1sZWZ0OiAyNXB4Ow0KICAgIGZvbnQtd2VpZ2h0OiBib2xkOw0KICB9DQogIC50ZXh0IHsNCiAgICBmb250LXNpemU6IDE0cHg7DQogIH0NCiAgLml0ZW0gew0KICAgIG1hcmdpbi1ib3R0b206IDE4cHg7DQogIH0NCiAgLmNsZWFyZml4OmJlZm9yZSwNCiAgLmNsZWFyZml4OmFmdGVyIHsNCiAgICBkaXNwbGF5OiB0YWJsZTsNCiAgICBjb250ZW50OiAnJzsNCiAgfQ0KICAuY2xlYXJmaXg6YWZ0ZXIgew0KICAgIGNsZWFyOiBib3RoOw0KICB9DQoNCiAgLmJveC1jYXJkIHsNCiAgICBtYXJnaW4tbGVmdDogMTAlOw0KICAgIG1pbi1oZWlnaHQ6IDEwMCU7DQoNCiAgICB3aWR0aDogODAlOw0KICAgIGJvcmRlci1yYWRpdXM6IDMwcHg7DQogIH0NCg=="},{"version":3,"sources":["basicInfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA","file":"basicInfo.vue","sourceRoot":"src/views/personalCenter","sourcesContent":["<template>\r\n  <div class=\"personalCenter\">\r\n    <el-container>\r\n      <el-header> Basic Information </el-header>\r\n      <el-container style=\"height:650px\">\r\n        <el-aside width=\"400px\">\r\n          <el-col :span=\"12\">\r\n            <div class=\"sub-title\" />\r\n            <div class=\"demo-basic--circle\">\r\n              <div class=\"img\">\r\n                <el-avatar\r\n                  id=\"imgage\"\r\n                  :size=\"100\"\r\n                  :src=\"valueUrl\"\r\n                  align=\"center\"\r\n                />\r\n              </div>\r\n              <div class=\"block\">\r\n                <span> {{ name }} </span>\r\n              </div>\r\n            </div>\r\n          </el-col>\r\n\r\n          <el-button-group style=\"float: right; padding: 3px 0\" type=\"text\">\r\n            <v-btn color=\"#50A75E\" class=\"submit white--text\" height=\"30\" style=\"margin-left:20px;\" @click=\"$refs.inputFile.click()\">Upload Avatar</v-btn>\r\n            <input v-show=\"false\" ref=\"inputFile\" type=\"file\" accept=\"image/*\" @change=\"uploadFile($event)\">\r\n          </el-button-group>\r\n        </el-aside>\r\n        <el-container>\r\n          <el-main>\r\n            <el-card class=\"box-card\">\r\n              <div>\r\n                <span style=\"float: left\" shadow=\"hover\"><b>Name</b></span>\r\n                <br>\r\n                <span> {{ name }} </span>\r\n                <el-divider />\r\n                <span style=\"float: left\" shadow=\"hover\"><b>Email</b></span>\r\n                <br>\r\n                <span> {{ email }} </span>\r\n                <el-divider />\r\n                <span style=\"float: left\" shadow=\"hover\"><b>Self Introduction</b></span>\r\n                <br>\r\n                <span> {{ intro }} </span>\r\n                <el-divider />\r\n                <span style=\"float: left\" shadow=\"hover\"><b>Identity</b></span>\r\n                <br>\r\n                <span> {{ identity }} </span>\r\n                <el-divider />\r\n              </div>\r\n              <v-btn color=\"#64d978\" class=\"submit white--text\" height=\"30\" @click=\"toggleModify\">Modify</v-btn>\r\n              <v-btn color=\"#64d9d6\" class=\"submit white--text\" height=\"30\" style=\"margin-left:20px;\" @click=\"goChangePassword\">Change Password</v-btn>\r\n            </el-card>\r\n          </el-main>\r\n        </el-container>\r\n      </el-container>\r\n    </el-container>\r\n    <div class=\"edit_dialog\">\r\n      <el-dialog\r\n        title=\"Edit User Information\"\r\n        :visible.sync=\"editdialogVisible\"\r\n        width=\"50%\"\r\n        style=\"font-family: Lucida Sans; color:#000000\"\r\n        append-to-body\n      >\r\n        <el-form ref=\"edit_user\" label-width=\"100px\" :model=\"edit_user\" :rules=\"edit_rules\">\r\n          <el-form-item label=\"Username\" prop=\"username\">\r\n            <el-input v-model=\"edit_user.username\" placeholder=\"\" />\r\n          </el-form-item>\r\n\r\n          <el-form-item label=\"Intro\" prop=\"intro\">\r\n            <el-input v-model=\"edit_user.intro\" placeholder=\"\" />\r\n          </el-form-item>\r\n          <el-form-item el-form-item>\r\n            <v-btn color=\"#FBE87985\" class=\"cancel#AAAAAA--text\" height=\"30\" @click=\"cancelEdit\">Cancel</v-btn>\r\n            <v-btn color=\"#50A75E\" class=\"submit white--text\" height=\"30\" style=\"margin-left:20px;\" @click=\"handleUpdate\">Submit</v-btn>\r\n          </el-form-item>\r\n        </el-form>\r\n      </el-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { updateProfile, updateAvatar } from '@/api/personalCenter'\r\nexport default {\r\n  name: 'BasicInformation',\r\n  data() {\r\n    return {\r\n      valueUrl: '',\r\n      name: '',\r\n      email: '',\r\n      intro: '',\r\n      identity: '',\r\n      editdialogVisible: false,\r\n      edit_user: {\r\n        username: '',\r\n        intro: ''\r\n      },\r\n      edit_rules: {\r\n        username: [{\r\n          min: 5,\r\n          max: 12,\r\n          message: 'Range within 5 to 12 characters',\r\n          trigger: 'blur'\r\n        }],\r\n        intro: [{\r\n          min: 0,\r\n          max: 40,\r\n          message: 'maximum 40 characters',\r\n          trigger: 'blur'\r\n        }]\r\n      }\r\n    }\r\n  },\r\n  created() {\r\n    this.valueUrl = this.$store.state.user.avatar\r\n    this.name = this.$store.state.user.name.replace(/\\s*/g, '')\r\n    this.email = this.$store.state.user.email\r\n    this.intro = this.$store.state.user.intro\r\n    this.identity = this.$store.state.user.roles[0]\r\n    console.log(this.valueUrl)\r\n  },\r\n  methods: {\r\n\r\n    toggleModify() {\r\n      this.edit_user.username = this.name\r\n      this.edit_user.intro = this.intro\r\n      this.editdialogVisible = true\r\n    },\r\n    handleUpdate() {\r\n      // send avatar and name, intro seperately\r\n      updateProfile(this.$store.state.user.token, this.edit_user).then(res => {\r\n        console.log('---basic info: send updated profile successfully')\r\n        if (res.data['success']) {\r\n          this.$message({\r\n            message: 'Update Profile Successfully',\r\n            type: 'success'\r\n          })\r\n          this.editdialogVisible = false\r\n          this.$router.go(0)\r\n        } else {\r\n          this.$message({\r\n            message: 'Update Profile Failed! Please try again',\r\n            type: 'error'\r\n          })\r\n          this.edit_user.name = this.name\r\n          this.edit_user.intro = this.intro\r\n          this.editdialogVisible = false\r\n        }\r\n      })\r\n    },\r\n    uploadFile(el) {\r\n      if (!el.target.files[0].size) return // if file size = 0, return\r\n      if (el.target.files[0].type.indexOf('image') === -1) { // make sure an image is selected\r\n        return\r\n      } else {\r\n        const that = this\r\n        const reader = new FileReader() // read file\r\n        reader.readAsDataURL(el.target.files[0]) // read file\r\n        reader.onload = function() {\r\n          // after reading, get the url\r\n          that.valueUrl = this.result\r\n          // console.log(that.valueUrl);\r\n        }\r\n        // const uid = 'e0c9dd3de0418e698d49984ae035992a'; //uid needed for back-end\r\n        var formData = new FormData() // formdata\r\n        // formData.append('res', el.target.files[0]);\r\n        formData.append('userID', this.$store.state.user.token)\r\n        formData.append('photo', el.target.files[0])\r\n        // post the image to back-end\r\n        updateAvatar(formData).then(res => {\r\n          if (res.data['success']) {\r\n            this.$message({\r\n              message: 'Update Profile Successfully',\r\n              type: 'success'\r\n            })\r\n            this.$router.go(0)\r\n          } else {\r\n            this.$message({\r\n              message: 'Update Profile Failed! Please try again',\r\n              type: 'error'\r\n            })\r\n            this.$router.go(0)\r\n          }\r\n        })\r\n      }\r\n    },\r\n    cancelEdit() {\r\n      this.edit_user.username = this.name\r\n      this.edit_user.intro = this.intro\r\n      this.editdialogVisible = false\r\n    },\r\n    goChangePassword() {\r\n      this.$router.push('/personalCenter/changePassword')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.dashboard {\r\n  &-container {\r\n    margin: 30px;\r\n  }\r\n  &-text {\r\n    font-size: 30px;\r\n    line-height: 46px;\r\n  }\r\n}\r\n\r\n.disInputStyle{\r\n  text-align: center;\r\n}\r\n\r\n.personalCenter {\r\n  min-height: 100%;\r\n  height: 100%;\r\n  background-color: #e9eef3;\r\n}\r\n\r\n.user-avatar {\r\n  cursor: pointer;\r\n  width: 40px;\r\n  height: 40px;\r\n  border-radius: 10px;\r\n}\r\n\r\n.el-header {\r\n    line-height: 60px;\r\n    text-align: center;\r\n    background-color: #b3c0d1;\r\n  }\r\n  .el-aside {\r\n    line-height: 44px;\r\n    text-align: center;\r\n    background-color: #d3dce6;\r\n  }\r\n  .el-main {\r\n    min-height: 100%;\r\n    line-height: 36px;\r\n    text-align: center;\r\n    background-color: #e9eef3;\r\n  }\r\n\r\n  .demo-basic--circle {\r\n    margin-top: 30px;\r\n    margin-left: 150px;\r\n  }\r\n  .block {\r\n    margin-left: 25px;\r\n    font-weight: bold;\r\n  }\r\n  .text {\r\n    font-size: 14px;\r\n  }\r\n  .item {\r\n    margin-bottom: 18px;\r\n  }\r\n  .clearfix:before,\r\n  .clearfix:after {\r\n    display: table;\r\n    content: '';\r\n  }\r\n  .clearfix:after {\r\n    clear: both;\r\n  }\r\n\r\n  .box-card {\r\n    margin-left: 10%;\r\n    min-height: 100%;\r\n\r\n    width: 80%;\r\n    border-radius: 30px;\r\n  }\r\n</style>\n"]}]}